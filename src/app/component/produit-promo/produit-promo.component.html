<div class="bg-dark pt-4 pb-5">
    <div class="container pt-2 pb-3 pt-lg-3 pb-lg-4">
      <div class="d-lg-flex justify-content-between pb-3">
        <div class="order-lg-2 mb-3 mb-lg-0 pt-lg-2">
          <nav aria-label="breadcrumb">
            <ol class="breadcrumb breadcrumb-light flex-lg-nowrap justify-content-center justify-content-lg-start">
              <li class="breadcrumb-item"><a class="text-nowrap" href="index.html"><i class="ci-home"></i>Home</a></li>
             
              <li class="breadcrumb-item text-nowrap active" aria-current="page">Promotion</li>
            </ol>
          </nav>
        </div>
        <div class="order-lg-1 pe-lg-4 text-center text-lg-start">
          <h1 class="h3 text-light mb-0">Promo cette semaine</h1>
        </div>
      </div>
    </div>
  </div>
  <div class="container pb-5 mb-2 mb-md-4">
    <!-- Toolbar-->
   
    <!-- Products grid-->
    <div class="row pt-3 mx-n2">
      <!-- Product-->


      <div class="col-lg-3 col-md-4 col-sm-6 px-2 mb-4" *ngFor="let p of produits">
        <div class="card product-card" >
               
            <!-- favorit-->
           <label *ngFor="let r of p.favorits">
                           
           <div *ngIf="(r.username === authService.loggedUser); then thenBlock else elseBlock " >

             

           </div>

                 <ng-template #thenBlock>
                   <button (click)="removefav(p,authService.loggedUser,p.nomProduit)"
                    class="btn-wishlist btn-sm " style="color: red;" type="button"  data-bs-placement="left" title="remove from wishlist"><i class="ci-heart-filled" style="color: red ;"></i></button>
                 
                   </ng-template>
                   
               <label *ngIf="r.username !== authService.loggedUser "> 
                   
                   <button  (click)="addfav(p,authService.loggedUser,p.idProduit)"  
                   class="btn-wishlist btn-sm" type="button"  data-bs-placement="left" title="Add to wishlistf"><i class="ci-heart" ></i></button>  
                 
               </label>

               <ng-template #thenBlock>
                 
               </ng-template>
         
           </label>

          
            <!-- fer8a ma fiha 7ata user-->  
           <label >
          
             <button *ngIf="!(p.favorits.length) " (click)="addfav(p,authService.loggedUser,p.idProduit)"  class="btn-wishlist btn-sm" type="button"  data-bs-placement="left" title="Add to wishlist"><i class="ci-heart" ></i></button>


         </label> 
        
    <!--    <div *ngFor="let r of p.favorits">

          

         <label [ngSwitch]="r.username">

           <label *ngSwitchCase="authService.loggedUser">
             <button (click)="removefav(p,authService.loggedUser,p.nomProduit)"
             class="btn-wishlist btn-sm " style="color: red;" type="button"  data-bs-placement="left" title="remove from wishlist"><i class="ci-heart-filled" style="color: red ;"></i></button>
           </label>

           <label  *ngSwitchCase="!authService.loggedUser">

             <button  (click)="addfav(p,authService.loggedUser,p.idProduit)"  class="btn-wishlist btn-sm" type="button"  data-bs-placement="left" title="Add to wishlist"><i class="ci-heart" ></i></button>

           </label>

         </label>

       </div>
          

       <label >
          
         <button *ngIf="!(p.favorits.length) " (click)="addfav(p,authService.loggedUser,p.idProduit)"  class="btn-wishlist btn-sm" type="button"  data-bs-placement="left" title="Add to wishlist lo5ra"><i class="ci-heart" ></i></button>


       </label> -->
         
       
         <a class="card-img-top d-block overflow-hidden" routerLink="/productdetails/{{p.idProduit}}">
           
            <img [src]="p.productImages[0].url" class="img-responsive" style=" height: 190px; ;" alt="Product">
         
         </a>
         <div class="card-body py-2"><a class="product-meta d-block fs-xs pb-1" href="#">{{p.categorie.nomCategory }}</a>
           <h3 class="product-title fs-sm"><a href="shop-single-v1.html">{{p.nomProduit}}</a></h3>
          
          
         

           <div class="d-flex justify-content-between">

             <div class="product-price" *ngIf="(p.promo)==null">
               <span class="text-accent">{{p.prixProduit}} DT</span>
             </div>
             
             <div class="product-price" *ngIf="(p.promo)!=null">
               <span class="text-accent" >{{p.promo}} DT</span>
               <del class="text-muted  danger" style="font-size:15px; color: red;">{{p.prixProduit}} DT</del>
             </div>

           
             

           </div>
         </div>
         <div class="card-body card-body-hidden">
         
           <button (click)="addToCart(p)" class="btn btn-primary btn-sm d-block w-100 mb-2" type="button"><i class="ci-cart fs-sm me-1"></i>Add to Cart</button>
           <div class="text-center"><a class="nav-link-style fs-ms" href="#quick-view" data-bs-toggle="modal"><i class="ci-eye align-middle me-1"></i>Quick view</a></div>
         </div>
       </div>
       <hr class="d-sm-none">
     </div>
   
   </div>
   <!-- Banner-->
 <div *ngIf="produits?.length == 0" class="alert alert-danger col-md-12" role="alert">
     No products found.
 </div>
    <!-- Banners-->
   
 
    <hr class="my-3">
    <!-- Pagination-->
    <nav class="d-flex justify-content-between pt-2" aria-label="Page navigation">
      <ul class="pagination">
        <li class="page-item"><a class="page-link" href="#"><i class="ci-arrow-left me-2"></i>Prev</a></li>
      </ul>
      <ul class="pagination">
        <li class="page-item d-sm-none"><span class="page-link page-link-static">1 / 5</span></li>
        <li class="page-item active d-none d-sm-block" aria-current="page"><span class="page-link">1<span class="visually-hidden">(current)</span></span></li>
        <li class="page-item d-none d-sm-block"><a class="page-link" href="#">2</a></li>
        <li class="page-item d-none d-sm-block"><a class="page-link" href="#">3</a></li>
        <li class="page-item d-none d-sm-block"><a class="page-link" href="#">4</a></li>
        <li class="page-item d-none d-sm-block"><a class="page-link" href="#">5</a></li>
      </ul>
      <ul class="pagination">
        <li class="page-item"><a class="page-link" href="#" aria-label="Next">Next<i class="ci-arrow-right ms-2"></i></a></li>
      </ul>
    </nav>
  </div>